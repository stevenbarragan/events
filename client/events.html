<template name="display_events">
  <table class="table">
    <thead>
      <tr>
        <th>Event</th>
        <th>Department</th>
        <th>Owner</th>
        <th>Participants</th>
      </tr>
    </thead>
    {{#each events}}
      {{> display_event}}
    {{/each}}
    {{> add_new_event}}
  </table>
</template>

<template name="display_event">
  <tr class='event'>
    <td class="edit-field">
      {{#if editing }}
        <input type="text" value="{{name}}" class="name">
      {{ else }}
        {{ name }}
      {{/if}}
    </td>
    <td class="edit-field">
      {{#if editing }}
        <input type="text" value="{{department}}" class="department">
      {{ else }}
        {{ department }}
      {{/if}}
    </td>
    <td class="edit-field">
      {{#if editing }}
        <input type="text" value="{{owner}}" class="owner">
      {{ else }}
        {{ owner }}
      {{/if}}
    </td>
    <td>
      {{ participants.length }}
    </td>
    <td>
      {{#if currentUser }}
        {{#if already_going }}
          <button class="btn notgoing btn-info">I'm not going</button>
        {{ else }}
          <button class="btn going btn-info">I'm going</button>
        {{/if}}
      {{/if}}
      <button class="btn delete btn-danger">Delete</button>
    </td>
  </tr>
</template>

<template name="add_new_event">
  {{#if currentUser }}
    <tr class="add_event">
      <td>
        <input type="text" value="" class="name form-control">
      </td>
      <td>
        <input type="text" value="" class="department form-control">
      </td>
      <td>
        {{ currentUser.profile.name }}
      </td>
      <td>
        <button class="btn save_new_event btn-default">Add</button>
      </td>
    </td>
  {{/if}}
</template>
